<!DOCTYPE html>
<html>
<head>
  <title>Image Test</title>
</head>
<body>
  <h1>Testing Image Loading</h1>

  <h2>Direct API Test (through Vite proxy):</h2>
  <img src="/api/v1/content/2100bdd1-9aef-48ea-bbb4-60f9ab875ac0/local-media?type=cover"
       style="border: 2px solid red; width: 200px;"
       onerror="console.error('Image failed to load'); this.style.border='5px solid blue';" />

  <h2>Backend Direct (no proxy):</h2>
  <img src="http://localhost:3000/api/v1/content/2100bdd1-9aef-48ea-bbb4-60f9ab875ac0/local-media?type=cover"
       style="border: 2px solid green; width: 200px;"
       onerror="console.error('Direct image failed to load'); this.style.border='5px solid orange';" />

  <h2>Console:</h2>
  <pre id="console"></pre>

  <script>
    const log = document.getElementById('console');

    function testImage(url, label) {
      return fetch(url)
        .then(response => {
          log.textContent += `\n${label}: Status ${response.status}, Type: ${response.headers.get('Content-Type')}, Length: ${response.headers.get('Content-Length')}`;
          return response.blob();
        })
        .then(blob => {
          log.textContent += `\n${label}: Blob size ${blob.size}, type ${blob.type}`;
        })
        .catch(error => {
          log.textContent += `\n${label}: ERROR - ${error.message}`;
        });
    }

    // Test both URLs
    Promise.all([
      testImage('/api/v1/content/2100bdd1-9aef-48ea-bbb4-60f9ab875ac0/local-media?type=cover', 'Proxy URL'),
      testImage('http://localhost:3000/api/v1/content/2100bdd1-9aef-48ea-bbb4-60f9ab875ac0/local-media?type=cover', 'Direct URL')
    ]).then(() => {
      log.textContent += '\n\nAll tests completed!';
    });
  </script>
</body>
</html>
