# ä»ªè¡¨ç›˜ç»Ÿè®¡ API æ–‡æ¡£

## ğŸ“‹ æ¨¡å—æ¦‚è¿°

ä»ªè¡¨ç›˜ç»Ÿè®¡æ¨¡å—æä¾›å†…å®¹ç®¡ç†ç³»ç»Ÿçš„æ•°æ®å¯è§†åŒ–ç»Ÿè®¡åŠŸèƒ½ï¼ŒåŒ…æ‹¬æ ¸å¿ƒæŒ‡æ ‡ã€å¹³å°åˆ†å¸ƒã€ç±»å‹å¯¹æ¯”å’Œè¶‹åŠ¿åˆ†æã€‚

**æ¥å£æ•°é‡**: 5ä¸ª
**åŸºç¡€è·¯å¾„**: `/api/v1/dashboard`
**è®¤è¯è¦æ±‚**: æ‰€æœ‰æ¥å£å‡éœ€è¦è®¤è¯ âœ…

---

## ğŸ“‘ ä¸»è¦æ¥å£åˆ—è¡¨

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | è¯´æ˜ |
|------|------|------|------|
| è·å–æ‰€æœ‰æ•°æ® | GET | `/` | ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ä»ªè¡¨ç›˜æ•°æ® |
| è·å–ç»Ÿè®¡æŒ‡æ ‡ | GET | `/stats` | æ ¸å¿ƒç»Ÿè®¡æ•°æ® |
| å¹³å°åˆ†å¸ƒ | GET | `/platform-distribution` | å†…å®¹å¹³å°åˆ†å¸ƒæ•°æ® |
| ç±»å‹å¯¹æ¯” | GET | `/content-type-comparison` | è§†é¢‘ä¸å›¾ç‰‡å¯¹æ¯” |
| è¿‘æœŸè¶‹åŠ¿ | GET | `/recent-trend` | è¿‘7å¤©å†…å®¹è¶‹åŠ¿ |

---

## 3.1 è·å–æ‰€æœ‰ä»ªè¡¨ç›˜æ•°æ®

**åŸºæœ¬ä¿¡æ¯**
- **ç«¯ç‚¹**: `GET /api/v1/dashboard/`
- **åŠŸèƒ½**: ä¸€æ¬¡æ€§è·å–æ‰€æœ‰ä»ªè¡¨ç›˜æ•°æ®ï¼ˆæ¨èä½¿ç”¨ï¼‰
- **è®¤è¯**: âœ… éœ€è¦è®¤è¯
- **ç¼“å­˜**: 5åˆ†é’Ÿ

---

### è¯·æ±‚å‚æ•°

æ— 

---

### æˆåŠŸå“åº” (200 OK)

```json
{
  "message": "è·å–æ‰€æœ‰ä»ªè¡¨ç›˜æ•°æ®æˆåŠŸ",
  "data": {
    "stats": {
      "total": 1000,
      "videoCount": 600,
      "imageCount": 400,
      "todayAdded": 25,
      "activeTasks": 5
    },
    "platformDistribution": [
      { "type": "å°çº¢ä¹¦", "value": 600 },
      { "type": "æŠ–éŸ³", "value": 400 }
    ],
    "contentTypeComparison": [
      { "type": "è§†é¢‘", "value": 600 },
      { "type": "å›¾æ–‡", "value": 400 }
    ],
    "recentTrend": [
      { "date": "12-22", "count": 120 },
      { "date": "12-23", "count": 135 },
      { "date": "12-24", "count": 125 },
      { "date": "12-25", "count": 150 },
      { "date": "12-26", "count": 140 },
      { "date": "12-27", "count": 145 },
      { "date": "12-28", "count": 155 }
    ]
  }
}
```

---

### å“åº”å­—æ®µè¯´æ˜

#### statsï¼ˆæ ¸å¿ƒç»Ÿè®¡ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| total | number | æ€»å†…å®¹æ•° |
| videoCount | number | è§†é¢‘å†…å®¹æ•° |
| imageCount | number | å›¾ç‰‡å†…å®¹æ•° |
| todayAdded | number | ä»Šæ—¥æ–°å¢æ•° |
| activeTasks | number | æ´»è·ƒä»»åŠ¡æ•° |

#### platformDistributionï¼ˆå¹³å°åˆ†å¸ƒï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| type | string | å¹³å°åç§°ï¼ˆä¸­æ–‡ï¼‰ |
| value | number | å†…å®¹æ•°é‡ |

#### contentTypeComparisonï¼ˆç±»å‹å¯¹æ¯”ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| type | string | ç±»å‹ï¼ˆè§†é¢‘/å›¾æ–‡ï¼‰ |
| value | number | æ•°é‡ |

#### recentTrendï¼ˆè¿‘æœŸè¶‹åŠ¿ï¼‰
| å­—æ®µå | ç±»å‹ | è¯´æ˜ |
|--------|------|------|
| date | string | æ—¥æœŸï¼ˆMM-DDæ ¼å¼ï¼‰ |
| count | number | å½“å¤©æ–°å¢æ•°é‡ |

---

### ä»£ç ç¤ºä¾‹

**cURL**:
```bash
curl -X GET "http://localhost:3000/api/v1/dashboard/" \
  -H "Authorization: Bearer <token>"
```

**JavaScript (Axios)**:
```javascript
const getDashboardData = async () => {
  const response = await axios.get('/api/v1/dashboard/', {
    headers: {
      'Authorization': `Bearer ${localStorage.getItem('token')}`
    }
  });
  return response.data;
};
```

**Kotlin (Retrofit)**:
```kotlin
@GET("dashboard/")
suspend fun getAllDashboardData(): DashboardResponse

data class DashboardResponse(
    val message: String,
    val data: DashboardData
)

data class DashboardData(
    val stats: Stats,
    val platformDistribution: List<DistributionItem>,
    val contentTypeComparison: List<ComparisonItem>,
    val recentTrend: List<TrendItem>
)
```

---

### æ³¨æ„äº‹é¡¹

- âœ… **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨æ­¤æ¥å£å¯ä¸€æ¬¡æ€§è·å–æ‰€æœ‰æ•°æ®ï¼Œé¿å…å¤šæ¬¡è¯·æ±‚
- âœ… **ç¼“å­˜æœºåˆ¶**ï¼šæ•°æ®ç¼“å­˜5åˆ†é’Ÿï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢
- âœ… **å¹¶è¡ŒæŸ¥è¯¢**ï¼šåç«¯å¹¶è¡Œæ‰§è¡Œå¤šä¸ªæŸ¥è¯¢ï¼Œæé«˜å“åº”é€Ÿåº¦

---

## 3.2 è·å–ç»Ÿè®¡æŒ‡æ ‡

**åŸºæœ¬ä¿¡æ¯**
- **ç«¯ç‚¹**: `GET /api/v1/dashboard/stats`
- **åŠŸèƒ½**: è·å–æ ¸å¿ƒç»Ÿè®¡æŒ‡æ ‡
- **è®¤è¯**: âœ… éœ€è¦è®¤è¯

---

### æˆåŠŸå“åº” (200 OK)

```json
{
  "message": "è·å–ä»ªè¡¨ç›˜ç»Ÿè®¡æ•°æ®æˆåŠŸ",
  "data": {
    "total": 1000,
    "videoCount": 600,
    "imageCount": 400,
    "todayAdded": 25,
    "activeTasks": 5
  }
}
```

---

## 3.3 å¹³å°åˆ†å¸ƒ

**åŸºæœ¬ä¿¡æ¯**
- **ç«¯ç‚¹**: `GET /api/v1/dashboard/platform-distribution`
- **åŠŸèƒ½**: è·å–å„å¹³å°å†…å®¹åˆ†å¸ƒæ•°æ®
- **è®¤è¯**: âœ… éœ€è¦è®¤è¯

---

### æˆåŠŸå“åº” (200 OK)

```json
{
  "message": "è·å–å†…å®¹å¹³å°åˆ†å¸ƒæ•°æ®æˆåŠŸ",
  "data": [
    { "type": "å°çº¢ä¹¦", "value": 600 },
    { "type": "æŠ–éŸ³", "value": 400 },
    { "type": "å¾®åš", "value": 0 },
    { "type": "Bç«™", "value": 0 }
  ]
}
```

---

### å¹³å°åç§°æ˜ å°„

| è‹±æ–‡æ ‡è¯† | ä¸­æ–‡åç§° |
|---------|----------|
| xiaohongshu | å°çº¢ä¹¦ |
| douyin | æŠ–éŸ³ |
| weibo | å¾®åš |
| kuaishou | å¿«æ‰‹ |
| bilibili | Bç«™ |

---

## 3.4 å†…å®¹ç±»å‹å¯¹æ¯”

**åŸºæœ¬ä¿¡æ¯**
- **ç«¯ç‚¹**: `GET /api/v1/dashboard/content-type-comparison`
- **åŠŸèƒ½**: è·å–è§†é¢‘ä¸å›¾ç‰‡å†…å®¹æ•°é‡å¯¹æ¯”
- **è®¤è¯**: âœ… éœ€è¦è®¤è¯

---

### æˆåŠŸå“åº” (200 OK)

```json
{
  "message": "è·å–å†…å®¹ç±»å‹å¯¹æ¯”æ•°æ®æˆåŠŸ",
  "data": [
    { "type": "è§†é¢‘", "value": 600 },
    { "type": "å›¾æ–‡", "value": 400 }
  ]
}
```

---

## 3.5 è¿‘æœŸè¶‹åŠ¿

**åŸºæœ¬ä¿¡æ¯**
- **ç«¯ç‚¹**: `GET /api/v1/dashboard/recent-trend`
- **åŠŸèƒ½**: è·å–è¿‘7å¤©å†…å®¹å¢é•¿è¶‹åŠ¿
- **è®¤è¯**: âœ… éœ€è¦è®¤è¯

---

### æˆåŠŸå“åº” (200 OK)

```json
{
  "message": "è·å–è¿‘æœŸå†…å®¹è¶‹åŠ¿æ•°æ®æˆåŠŸ",
  "data": [
    { "date": "12-22", "count": 120 },
    { "date": "12-23", "count": 135 },
    { "date": "12-24", "count": 125 },
    { "date": "12-25", "count": 150 },
    { "date": "12-26", "count": 140 },
    { "date": "12-27", "count": 145 },
    { "date": "12-28", "count": 155 }
  ]
}
```

---

### æ•°æ®è¯´æ˜

- **æ—¶é—´èŒƒå›´**: æœ€è¿‘7å¤©ï¼ˆåŒ…æ‹¬ä»Šå¤©ï¼‰
- **æ—¥æœŸæ ¼å¼**: MM-DDï¼ˆæœˆ-æ—¥ï¼‰
- **ç»Ÿè®¡å£å¾„**: æŒ‰åˆ›å»ºæ—¶é—´ç»Ÿè®¡ï¼ˆcreated_atï¼‰

---

## é™„å½•

### æ•°æ®å¯è§†åŒ–å»ºè®®

#### 1. å¹³å°åˆ†å¸ƒå›¾
å»ºè®®ä½¿ç”¨**é¥¼å›¾**æˆ–**ç¯å½¢å›¾**ï¼š
```javascript
// ECharts ç¤ºä¾‹
option = {
  series: [{
    type: 'pie',
    data: platformDistribution
  }]
}
```

#### 2. ç±»å‹å¯¹æ¯”å›¾
å»ºè®®ä½¿ç”¨**æŸ±çŠ¶å›¾**æˆ–**é¥¼å›¾**ï¼š
```javascript
option = {
  xAxis: { type: 'category', data: contentTypeComparison.map(d => d.type) },
  yAxis: { type: 'value' },
  series: [{ type: 'bar', data: contentTypeComparison.map(d => d.value) }]
}
```

#### 3. è¿‘æœŸè¶‹åŠ¿å›¾
å»ºè®®ä½¿ç”¨**æŠ˜çº¿å›¾**ï¼š
```javascript
option = {
  xAxis: { type: 'category', data: recentTrend.map(d => d.date) },
  yAxis: { type: 'value' },
  series: [{ type: 'line', data: recentTrend.map(d => d.count), smooth: true }]
}
```

---

### æ€§èƒ½ä¼˜åŒ–

- âœ… **ä½¿ç”¨è”åˆæ¥å£**: æ¨èä½¿ç”¨ `GET /dashboard/` ä¸€æ¬¡æ€§è·å–æ‰€æœ‰æ•°æ®
- âœ… **å®¢æˆ·ç«¯ç¼“å­˜**: å®¢æˆ·ç«¯å¯ç¼“å­˜æ•°æ®5åˆ†é’Ÿ
- âœ… **æŒ‰éœ€åŠ è½½**: é¦–å±ä½¿ç”¨è”åˆæ¥å£ï¼Œåç»­æ›´æ–°å¯å•ç‹¬è¯·æ±‚ç‰¹å®šæ¥å£

---

## ç›¸å…³æ–‡æ¡£

- [å†…å®¹ç®¡ç†æ¨¡å—](./02_å†…å®¹ç®¡ç†.md)
- [è®¤è¯æœºåˆ¶è¯¦è§£](../02_è®¤è¯æœºåˆ¶è¯¦è§£.md)

---

**æœ€åæ›´æ–°**: 2025-12-28
