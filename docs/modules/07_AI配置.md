# AI配置 API 文档

## 📋 模块概述

AI配置模块提供AI提供商的配置管理、API密钥管理、模型设置和测试连接功能。

**接口数量**: 16个
**基础路径**: `/api/v1/ai-config`
**认证要求**: 所有接口均需要认证 ✅

---

## 📑 主要接口列表

### 配置管理（10个接口）

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 获取配置列表 | GET | `/` | 获取所有AI配置 |
| 获取当前配置 | GET | `/active` | 获取当前启用的配置 |
| 获取配置详情 | GET | `/:id` | 获取单个AI配置 |
| 创建配置 | POST | `/` | 创建AI配置（管理员） |
| 更新配置 | PUT | `/:id` | 更新AI配置（管理员） |
| 删除配置 | DELETE | `/:id` | 删除AI配置（管理员） |
| 测试连接 | POST | `/:id/test` | 测试AI配置连接 |
| 复制配置 | POST | `/:id/copy` | 复制配置 |
| 批量更新 | PUT | `/batch` | 批量更新配置 |
| 批量删除 | DELETE | `/batch` | 批量删除配置 |

### 元数据（3个接口）

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 获取提供商列表 | GET | `/meta/providers` | 支持的AI提供商 |
| 获取配置模板 | GET | `/meta/templates/:provider` | 配置模板 |
| 获取密钥状态 | GET | `/security/key-status` | 加密密钥状态（管理员） |

### 导入导出（2个接口）

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 导入配置 | POST | `/import` | 导入配置文件 |
| 导出配置 | POST | `/export/:id` | 导出配置（密钥脱敏） |

### 密钥管理（1个接口）

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 轮换密钥 | POST | `/security/rotate-key` | 轮换加密密钥（管理员） |

---

## 支持的AI提供商

| 提供商 | 标识 | 状态 |
|--------|------|------|
| Ollama | ollama | ✅ |
| OpenAI | openai | ✅ |
| Anthropic | anthropic | ✅ |
| Claude | claude | ✅ |
| 其他 | ... | ... |

---

## 安全特性

- ✅ API密钥加密存储
- ✅ 导出时密钥脱敏
- ✅ 密钥轮换支持
- ✅ 测试历史记录

---

## 相关文档

- [AiConfig 实体](../data_models/AiConfig_实体.md)
- [AiAnalysisResult 实体](../data_models/AiAnalysisResult_实体.md)

---

**最后更新**: 2025-12-28
