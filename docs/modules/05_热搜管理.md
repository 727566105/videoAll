# 热搜管理 API 文档

## 📋 模块概述

热搜管理模块提供多平台热搜数据的抓取、查询、趋势分析和跨平台对比功能。

**接口数量**: 13个
**基础路径**: `/api/v1/hotsearch`
**认证要求**: 所有接口均需要认证 ✅

---

## 📑 主要接口列表

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 获取所有平台热搜 | GET | `/all` | 一次性获取所有平台热搜 |
| 获取热搜历史 | GET | `/history` | 历史热搜查询（支持筛选） |
| 跨平台对比 | GET | `/compare` | 热搜跨平台对比分析 |
| 热搜分析 | GET | `/analysis` | 热搜趋势分析 |
| 关键词趋势 | GET | `/keywords/:keyword` | 特定关键词的趋势 |
| 刷新所有热搜 | POST | `/refresh` | 刷新所有平台热搜（管理员） |
| 获取采集统计 | GET | `/stats` | 热搜采集统计信息 |
| 获取平台列表 | GET | `/platforms` | 支持的热搜平台列表 |
| 获取关联内容 | GET | `/related` | 热搜关键词关联内容 |
| 获取平台趋势 | GET | `/:platform/trends` | 特定平台的热搜趋势 |
| 根据日期获取 | GET | `/:platform` | 根据日期和平台获取热搜 |
| 抓取所有平台 | POST | `/` | 抓取所有平台热搜 |
| 抓取特定平台 | POST | `/:platform` | 抓取特定平台热搜 |
| 解析热搜内容 | POST | `/parse` | 从热搜关键词解析内容 |

---

## 核心接口说明

### 5.1 获取所有平台热搜

**端点**: `GET /api/v1/hotsearch/all`
**认证**: ✅ 需要认证
**缓存**: 15分钟

**成功响应**:
```json
{
  "message": "获取四平台热搜成功",
  "data": {
    "douyin": {
      "success": true,
      "data": [
        { "rank": 1, "keyword": "热点", "heat": 1234567 }
      ],
      "lastUpdate": "2025-12-28T12:27:14.123Z"
    },
    "xiaohongshu": { ... }
  }
}
```

---

### 5.2 获取热搜历史

**端点**: `GET /api/v1/hotsearch/history`
**认证**: ✅ 需要认证

**查询参数**:
- platforms: 平台列表（all或逗号分隔）
- startDate: 开始日期（YYYY-MM-DD）
- endDate: 结束日期
- keyword: 关键词搜索
- sortBy: 排序字段
- page/page_size: 分页参数

---

### 5.3 跨平台对比

**端点**: `GET /api/v1/hotsearch/compare`
**认证**: ✅ 需要认证

**功能**: 对比不同平台的热搜数据，找出共同点和差异

---

## 支持的平台

| 平台 | 英文标识 | 状态 |
|------|---------|------|
| 抖音 | douyin | ✅ |
| 小红书 | xiaohongshu | ✅ |
| 微博 | weibo | ✅ |
| 哔哩哔哩 | bilibili | ✅ |

---

## 相关文档

- [HotsearchSnapshot 实体](../data_models/HotsearchSnapshot_实体.md)
- [任务管理](./04_任务管理.md)

---

**最后更新**: 2025-12-28
