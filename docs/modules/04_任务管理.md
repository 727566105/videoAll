# 任务管理 API 文档

## 📋 模块概述

任务管理模块提供作者监控和定时任务的管理功能，包括任务的创建、查询、更新、删除和执行。

**接口数量**: 11个
**基础路径**: `/api/v1/tasks`
**认证要求**: 所有接口均需要认证 ✅

---

## 📑 主要接口列表

| 接口 | 方法 | 路径 | 说明 |
|------|------|------|------|
| 创建任务 | POST | `/` | 创建新的监控任务 |
| 获取任务列表 | GET | `/` | 获取任务列表（分页+筛选） |
| 获取任务详情 | GET | `/:id` | 根据 ID 获取任务 |
| 更新任务 | PUT | `/:id` | 更新任务配置 |
| 删除任务 | DELETE | `/:id` | 删除任务 |
| 切换任务状态 | PATCH | `/:id/status` | 启用/禁用任务 |
| 立即运行任务 | POST | `/:id/run` | 手动触发任务执行 |
| 运行热搜任务 | POST | `/hotsearch/run` | 运行热搜抓取任务 |
| 获取热搜日志 | GET | `/hotsearch/logs` | 获取热搜任务日志 |
| 获取任务日志 | GET | `/:taskId/logs` | 获取任务执行日志 |
| 获取所有日志 | GET | `/logs/all` | 获取所有日志 |

---

## 核心接口说明

### 4.1 创建任务

**端点**: `POST /api/v1/tasks/`
**认证**: ✅ 需要认证

**请求参数**:
```json
{
  "name": "任务名称",
  "platform": "xiaohongshu",
  "target_identifier": "作者ID或主页链接",
  "frequency": "hourly",
  "config": {}
}
```

**成功响应**: 201 Created

---

### 4.2 获取任务列表

**端点**: `GET /api/v1/tasks/`
**认证**: ✅ 需要认证

**查询参数**:
- page: 页码
- page_size: 每页数量
- platform: 平台筛选
- status: 状态筛选（0-禁用/1-启用）

---

### 4.3 立即运行任务

**端点**: `POST /api/v1/tasks/:id/run`
**认证**: ✅ 需要认证

**功能**: 手动触发任务执行，不受定时限制

---

## 任务频率

| 频率值 | 说明 |
|--------|------|
| 10min | 每10分钟 |
| 30min | 每30分钟 |
| hourly | 每小时 |
| 2hours | 每2小时 |
| 6hours | 每6小时 |
| 12hours | 每12小时 |
| daily | 每天 |
| weekly | 每周 |

---

## 相关文档

- [CrawlTask 实体](../data_models/CrawlTask_实体.md)
- [热搜管理](./05_热搜管理.md)

---

**最后更新**: 2025-12-28
